import { useState } from "react";
import { makeStyles } from "@material-ui/core";
import TextField from "@material-ui/core/TextField";
import Button from "@material-ui/core/Button";
import { Card, CardContent } from "@mui/material";
import "./Registration.css";
import { keyCloakRegisterUser } from "../../UserService";

// import CardHeader from "@material-ui/core/Card";
const useStyles = makeStyles((theme) => ({
  root: {
    display: "flex",
    flexDirection: "column",
    justifyContent: "center",
    alignItems: "center",
    padding: theme.spacing(2),

    "& .MuiTextField-root": {
      margin: theme.spacing(1),
      width: "300px",
    },
    "& .MuiButtonBase-root": {
      margin: theme.spacing(2),
    },
  },
}));

const Registration = () => {
  const classes = useStyles();
  // create state variables for each input
  const [firstName, setFirstName] = useState("");
  const [lastName, setLastName] = useState("");
  const [email, setEmail] = useState("");
  const [password, setPassword] = useState("");
  const [telephone, setTelephone] = useState("");
  // const [bgColor, setbgColor] = useState("#FFFFFF");

  // const validatePass =
  //   /^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=[^ ]{8,15}$)/;

  // if (!validatePass.test(password)) {
  //   setbgColor("red");
  // } else {
  //   console.log(" ");
  // e.target.password.style = outline red text color red
  // }

  const handleSubmit = (e) => {
    e.preventDefault();

    // password checker

    const raw = JSON.stringify({
      enabled: true,
      email,
      firstName,
      lastName,
      credentials: [
        {
          type: "password",
          value: password,
          temporary: false,
        },
      ],
      attributes: {
        telephone,
      },
    });
    console.log(raw);
    keyCloakRegisterUser(raw);

    // handleClose();
  };

  return (
    <>
      <div className="card">
        <Card
          className="my-card"
          style={{ backgroundColor: "#FFFFFF", borderRadius: "25px" }}
        >
          <h4>Sign Up</h4>
          {/* <CardHeader registration-title="Subscribe" className={classes.heading} /> */}
          <CardContent>
            <form className={classes.root} onSubmit={handleSubmit}>
              <TextField
                id="outlined-basic"
                label="First Name"
                variant="outlined"
                required
                error={(e) => e.target.value === ""}
                value={firstName}
                onChange={(e) => setFirstName(e.target.value)}
                style={{ borderRadius: "25px", backgroundColor: "#FFFFFF" }}
              />
              {/* <TextField
            label="First Name"
            variant="filled"
            required
            value={firstName}dddd
            onChange={(e) => setFirstName(e.target.value)}
            style={{ borderRadius: "7px", backgroundColor: "#FFFFFF" }}
          /> */}
              <TextField
                id="outlined-basic"
                label="Last Name"
                variant="outlined"
                required
                value={lastName}
                onChange={(e) => setLastName(e.target.value)}
                style={{ borderRadius: "25px", backgroundColor: "#FFFFFF" }}
              />
              <TextField
                id="outlined-basic"
                label="Email"
                variant="outlined"
                type="email"
                required
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                style={{ borderRadius: "25px", backgroundColor: "#FFFFFF" }}
              />

              <TextField
                id="outlined-basic"
                label="Password"
                variant="outlined"
                type="password"
                required
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                style={{
                  borderRadius: "25px",
                  backgroundColor: "FFFFFF",
                }}
              />

              {/* <TextField>
                <PasswordField
                  hintText="At least 8 characters"
                  floatingLabelText="Enter your password"
                  errorText="Your password is too short"
                />
              </TextField> */}
              <TextField
                id="outlined-basic"
                label="Telephone Number"
                variant="outlined"
                type="tel"
                value={telephone}
                onChange={(e) => setTelephone(e.target.value)}
                style={{ borderRadius: "25px", backgroundColor: "#FFFFFF" }}
              />
              <div>
                <Button
                  variant="contained"
                  // onClick={handleClose}
                  style={{ color: "#FFFFFF", backgroundColor: "#333C83" }}
                >
                  Cancel
                </Button>
                <Button
                  onSubmit={handleSubmit}
                  type="submit"
                  variant="contained"
                  style={{ color: "#FFFFFF", backgroundColor: "#333C83" }}
                >
                  Sign up
                </Button>
              </div>
            </form>
          </CardContent>
        </Card>
      </div>
    </>
  );
};

export default Registration;
